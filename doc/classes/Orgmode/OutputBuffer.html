<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: Orgmode::OutputBuffer</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">Orgmode::OutputBuffer</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../files/lib/orgmode_parser/output_buffer_rb.html">
                lib/orgmode_parser/output_buffer.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                Object
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
The <a href="OutputBuffer.html">OutputBuffer</a> is used to accumulate
multiple lines of orgmode text, and then emit them to the output all in one
go. The class will do the final textile substitution for inline formatting
and add a newline character prior emitting the output.
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000013">&lt;&lt;</a>&nbsp;&nbsp;
      <a href="#M000014">flush!</a>&nbsp;&nbsp;
      <a href="#M000015">list_indent_level</a>&nbsp;&nbsp;
      <a href="#M000011">new</a>&nbsp;&nbsp;
      <a href="#M000009">paragraph_modifier</a>&nbsp;&nbsp;
      <a href="#M000010">paragraph_modifier=</a>&nbsp;&nbsp;
      <a href="#M000012">prepare</a>&nbsp;&nbsp;
      <a href="#M000016">preserve_whitespace?</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





    <div id="attribute-list">
      <h3 class="section-bar">Attributes</h3>

      <div class="name-list">
        <table>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">buffer</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc">
This is the buffer that we accumulate into.

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">output_type</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
This is the current type of output being accumulated.

</td>
        </tr>
        </table>
      </div>
    </div>
      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000011" class="method-detail">
        <a name="M000011"></a>

        <div class="method-heading">
          <a href="#M000011" class="method-signature">
          <span class="method-name">new</span><span class="method-args">(output)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Creates a <a href="OutputBuffer.html#M000011">new</a> <a
href="OutputBuffer.html">OutputBuffer</a> object that is bound to an output
object. The output will get flushed to =output=.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000011-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000011-source">
<pre>
<span class="ruby-comment cmt"># File lib/orgmode_parser/output_buffer.rb, line 35</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">output</span>)
      <span class="ruby-ivar">@output</span> = <span class="ruby-identifier">output</span>
      <span class="ruby-ivar">@buffer</span> = <span class="ruby-value str">&quot;&quot;</span>
      <span class="ruby-ivar">@output_type</span> = <span class="ruby-identifier">:start</span>
      <span class="ruby-ivar">@list_indent_stack</span> = []
      <span class="ruby-ivar">@paragraph_modifier</span> = <span class="ruby-keyword kw">nil</span>
      <span class="ruby-ivar">@cancel_modifier</span> = <span class="ruby-keyword kw">false</span>

      <span class="ruby-ivar">@logger</span> = <span class="ruby-constant">Logger</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">STDERR</span>)
      <span class="ruby-ivar">@logger</span>.<span class="ruby-identifier">level</span> = <span class="ruby-constant">Logger</span><span class="ruby-operator">::</span><span class="ruby-constant">WARN</span>
    <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000013" class="method-detail">
        <a name="M000013"></a>

        <div class="method-heading">
          <a href="#M000013" class="method-signature">
          <span class="method-name">&lt;&lt;</span><span class="method-args">(str)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Accumulate the string @str@.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000013-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000013-source">
<pre>
<span class="ruby-comment cmt"># File lib/orgmode_parser/output_buffer.rb, line 59</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-operator">&lt;&lt;</span> (<span class="ruby-identifier">str</span>)
      <span class="ruby-ivar">@buffer</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">str</span>
    <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000014" class="method-detail">
        <a name="M000014"></a>

        <div class="method-heading">
          <a href="#M000014" class="method-signature">
          <span class="method-name">flush!</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Flushes the current buffer
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000014-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000014-source">
<pre>
<span class="ruby-comment cmt"># File lib/orgmode_parser/output_buffer.rb, line 64</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">flush!</span>
      <span class="ruby-ivar">@logger</span>.<span class="ruby-identifier">debug</span> <span class="ruby-node">&quot;FLUSH ==========&gt; #{@output_type}&quot;</span>
      <span class="ruby-keyword kw">if</span> (<span class="ruby-ivar">@output_type</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:blank</span>) <span class="ruby-keyword kw">then</span>
        <span class="ruby-ivar">@output</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;\n&quot;</span>
      <span class="ruby-keyword kw">elsif</span> (<span class="ruby-ivar">@buffer</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>) <span class="ruby-keyword kw">then</span>
        <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@cancel_modifier</span> <span class="ruby-keyword kw">then</span>
          <span class="ruby-ivar">@output</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;p. &quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@output_type</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:paragraph</span>
          <span class="ruby-ivar">@cancel_modifier</span> = <span class="ruby-keyword kw">false</span>
        <span class="ruby-keyword kw">end</span>
        <span class="ruby-ivar">@output</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-ivar">@paragraph_modifier</span> <span class="ruby-keyword kw">if</span> (<span class="ruby-ivar">@paragraph_modifier</span> <span class="ruby-keyword kw">and</span> <span class="ruby-keyword kw">not</span> <span class="ruby-identifier">sticky_modifier?</span>)
        <span class="ruby-ivar">@output</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-ivar">@buffer</span>.<span class="ruby-identifier">textile_substitution</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;\n&quot;</span>
      <span class="ruby-keyword kw">end</span>
      <span class="ruby-ivar">@buffer</span> = <span class="ruby-value str">&quot;&quot;</span>
    <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000015" class="method-detail">
        <a name="M000015"></a>

        <div class="method-heading">
          <a href="#M000015" class="method-signature">
          <span class="method-name">list_indent_level</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Gets the current list indent level.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000015-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000015-source">
<pre>
<span class="ruby-comment cmt"># File lib/orgmode_parser/output_buffer.rb, line 80</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list_indent_level</span>
      <span class="ruby-ivar">@list_indent_stack</span>.<span class="ruby-identifier">length</span>
    <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000009" class="method-detail">
        <a name="M000009"></a>

        <div class="method-heading">
          <a href="#M000009" class="method-signature">
          <span class="method-name">paragraph_modifier</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
This is an optional string that will get emitted when the buffer is
flushed.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000009-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000009-source">
<pre>
<span class="ruby-comment cmt"># File lib/orgmode_parser/output_buffer.rb, line 19</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">paragraph_modifier</span>
      <span class="ruby-ivar">@paragraph_modifier</span>
    <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000010" class="method-detail">
        <a name="M000010"></a>

        <div class="method-heading">
          <a href="#M000010" class="method-signature">
          <span class="method-name">paragraph_modifier=</span><span class="method-args">(modifier)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000010-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000010-source">
<pre>
<span class="ruby-comment cmt"># File lib/orgmode_parser/output_buffer.rb, line 23</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">paragraph_modifier=</span>(<span class="ruby-identifier">modifier</span>)
      <span class="ruby-comment cmt"># If we currently have a sticky modifier, we need to remember to</span>
      <span class="ruby-comment cmt"># cancel it on our next flush.</span>
      <span class="ruby-ivar">@cancel_modifier</span> = <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">sticky_modifier?</span>
      <span class="ruby-ivar">@paragraph_modifier</span> = <span class="ruby-identifier">modifier</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">sticky_modifier?</span>
        <span class="ruby-ivar">@output</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-ivar">@paragraph_modifier</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000012" class="method-detail">
        <a name="M000012"></a>

        <div class="method-heading">
          <a href="#M000012" class="method-signature">
          <span class="method-name">prepare</span><span class="method-args">(line)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Prepares the output buffer to receive content from a line. As a side
effect, this may flush the current accumulated text.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000012-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000012-source">
<pre>
<span class="ruby-comment cmt"># File lib/orgmode_parser/output_buffer.rb, line 49</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">prepare</span>(<span class="ruby-identifier">line</span>)
      <span class="ruby-ivar">@logger</span>.<span class="ruby-identifier">debug</span> <span class="ruby-node">&quot;Looking at #{line.paragraph_type}: #{line.to_s}&quot;</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">not</span> <span class="ruby-identifier">should_accumulate_output?</span>(<span class="ruby-identifier">line</span>) <span class="ruby-keyword kw">then</span>
        <span class="ruby-identifier">flush!</span>
      <span class="ruby-keyword kw">end</span>
      <span class="ruby-ivar">@output_type</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">paragraph_type</span>
      <span class="ruby-identifier">maintain_list_indent_stack</span>(<span class="ruby-identifier">line</span>)
    <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000016" class="method-detail">
        <a name="M000016"></a>

        <div class="method-heading">
          <a href="#M000016" class="method-signature">
          <span class="method-name">preserve_whitespace?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Test if we&#8216;re in an output mode in which whitespace is significant.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000016-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000016-source">
<pre>
<span class="ruby-comment cmt"># File lib/orgmode_parser/output_buffer.rb, line 85</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">preserve_whitespace?</span>
      <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@paragraph_modifier</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;bc.. &quot;</span>
    <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>